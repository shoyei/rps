<!DOCTYPE html>
<html>

<head></head>

<body>
    <script>


        // Starting score
        let playerScore = 0
        let computerScore = 0
        let currentGame

        // Play 5 rounds, best of 5 is the winner
        
            // Player inputs rock, paper, or scissors (case insensitive)
            function playerChoose() {
                selected = prompt("Rock, Paper, or Scissors");
                return selected.toLowerCase();
            }
            // The computer chooses rock, paper, or scissors
            function computerChoose() {
                let choices = ['rock', 'paper', 'scissors'];
                return choices[Math.floor(Math.random() * choices.length)];
            }

            // Compare results and choose a winner
            function playRound(_playerSelection, _computerSelection) {
                if ((_playerSelection == "rock" && _computerSelection == "scissors") ||
                    (_playerSelection == "paper" && _computerSelection == "rock") ||
                    (_playerSelection == "scissors" && _computerSelection == "paper")) {
                    playerScore++
                    return "You win! " + _playerSelection.toUpperCase() + " beats " + _computerSelection.toUpperCase() + "! " + "Score = you - " + playerScore + "/ computer - " + computerScore;
                }
                else if ((_computerSelection == "rock" & _playerSelection == "scissors") ||
                    (_computerSelection == "paper" && _playerSelection == "rock") ||
                    (_computerSelection == "scissors" && _playerSelection == "paper")) {
                    computerScore++
                    return "You lose! " + _computerSelection.toUpperCase() + " beats " + _playerSelection.toUpperCase() + "! " + "Score = you - " + playerScore + "/ computer - " + computerScore;
                }
                // Round is draw -- return null
                else if (_playerSelection == _computerSelection) {
                    return null
                }
            }
        function playGame() {

            // Loop for 5 rounds
            for (let i = 0; i < 5; i++) {
                const _playerSelection = playerChoose()
                const _computerSelection = computerChoose()
                const _round = playRound(_playerSelection, _computerSelection)
                if (_round === null) {
                    console.log("It's a draw!" + " Score = you - " + playerScore + "/ computer - " + computerScore)
                    // Move backward in loop to replay round
                    i--
                } else {
                    console.log(_round)
                }
                if (playerScore == 3)
                    return "YOU TOTALLY WIN";

                if (computerScore == 3)
                    return "YOU TOTALLY LOSE";
            }
            // Game never finished, throw error
            return new Error("Uh oh, the game never finished!")
        }

        currentGame = playGame()

        console.log(currentGame)

    </script>
</body>

</html>